<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}Fitness Klub{% endblock %}</title>
    {% load static %}
<link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
<style>
body {
font-family: 'Segoe UI', Arial, sans-serif;
background: linear-gradient(135deg, #1e3c72, #2a5298);
margin: 0;
padding: 0;
color: #fff;
transition: background 0.3s, color 0.3s;
min-height: 100vh;
        }
body.dark-theme {
background: linear-gradient(135deg, #2c3e50, #4a5568);
        }
.sidebar {
width: 220px;
position: fixed;
left: 0;
top: 0;
bottom: 0;
background: rgba(0, 0, 0, 0.8);
padding: 20px;
box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
z-index: 1000;
        }
.sidebar a, .sidebar button {
display: flex;
align-items: center;
color: #e0e0e0;
padding: 12px 0;
text-decoration: none;
font-size: 16px;
transition: color 0.3s, background 0.3s;
        }
.sidebar a:hover, .sidebar button:hover {
color: #00bfff;
background: rgba(255, 255, 255, 0.1);
border-radius: 5px;
        }
.sidebar i {
margin-right: 10px;
        }
.content {
margin-left: 240px;
padding: 20px;
        }
.glass-container {
background: rgba(255, 255, 255, 0.1);
border-radius: 15px;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
backdrop-filter: blur(10px);
padding: 20px;
margin: 20px 0;
max-width: 100%;
text-align: center;
color: #fff;
animation: fadeIn 0.5s ease-in;
        }
body.dark-theme .glass-container {
background: rgba(0, 0, 0, 0.3);
        }
@keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
table {
width: 100%;
border-collapse: collapse;
margin: 20px 0;
background: rgba(255, 255, 255, 0.9);
border-radius: 10px;
overflow: hidden;
color: #333;
        }
body.dark-theme table {
background: rgba(0, 0, 0, 0.7);
color: #fff;
        }
th, td {
padding: 12px;
text-align: left;
border: 1px solid #ddd;
        }
body.dark-theme th, body.dark-theme td {
border: 1px solid #555;
        }
th {
background: #2a5298;
color: #fff;
font-weight: bold;
        }
body.dark-theme th {
background: #4a5568;
        }
tr:nth-child(even) {
background: #f9f9f9;
        }
body.dark-theme tr:nth-child(even) {
background: #2d3748;
        }
tr:hover {
background: #f0f8ff;
        }
body.dark-theme tr:hover {
background: #4a5568;
        }
.action-btn {
background: #00bfff;
color: white;
border: none;
padding: 8px 12px;
border-radius: 5px;
text-decoration: none;
display: inline-block;
transition: background 0.3s, transform 0.2s;
        }
.action-btn:hover {
background: #0099cc;
transform: scale(1.05);
        }
.theme-toggle {
background: #666;
color: white;
border: none;
padding: 8px 12px;
border-radius: 5px;
cursor: pointer;
margin: 10px 0;
width: 100%;
        }
.theme-toggle:hover {
background: #555;
        }
@media (max-width: 768px) {
.sidebar {
width: 100%;
position: relative;
padding: 10px;
box-shadow: none;
            }
.content {
margin-left: 0;
            }
table {
font-size: 14px;
            }
        }
</style>
<!-- FIREBASE PUSH NOTIFIKACIJE ISKLJUČENE LOKALNO (na Render.com će raditi) -->
<script>
console.log("Firebase push notifikacije su privremeno isključene – lokalno okruženje");
</script>
    {% block extra_head %}{% endblock %}
</head>
<body>
<div class="sidebar">
        {% if request.user.is_authenticated %}
<button class="theme-toggle" onclick="toggleTheme()">Promeni temu</button>
            {% if user.userprofile.is_klijent %}
<a href="{% url 'klijent_dashboard' %}"><i class="fas fa-tachometer-alt"></i> Početna</a>
<a href="{% url 'rezervacije' %}"><i class="fas fa-calendar-alt"></i> Rezervacije</a>
            {% else %}
<!-- Dashboard i Statistike vide SAMO ADMINI -->
                {% if user.userprofile.is_admin %}
<a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                {% elif user.userprofile.is_trener %}
<a href="{% url 'trener_home' %}"><i class="fas fa-home"></i> Početna</a>
                {% endif %}
<a href="{% url 'rezervacije' %}"><i class="fas fa-calendar-alt"></i> Rezervacije</a>
<a href="{% url 'klijenti' %}"><i class="fas fa-users"></i> Klijenti</a>
<a href="{% url 'sank' %}"><i class="fas fa-coffee"></i> Šank</a>
<a href="{% url 'obavestenja' %}"><i class="fas fa-bell"></i> Obaveštenja</a>
                {% if user.userprofile.is_admin %}
<!-- SAMO ADMIN -->
<a href="{% url 'statistike' %}"><i class="fas fa-chart-bar"></i> Statistike</a>
                {% endif %}
<form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
<button type="submit"><i class="fas fa-sign-out-alt"></i> Odjava</button>
</form>
            {% endif %}
        {% else %}
<a href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i> Uloguj se</a>
        {% endif %}
</div>
<div class="content">
<form style="display: none;">{% csrf_token %}</form>
<div class="glass-container">
            {% if messages %}
                {% for message in messages %}
<script>
document.addEventListener('DOMContentLoaded', function() {
toastr.{{ message.tags }}("{{ message }}");
                        });
</script>
                {% endfor %}
            {% endif %}
            {% block content %}{% endblock %}
</div>
</div>
<!-- jQuery + Toastr -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script>
toastr.options = {
"closeButton": true,
"progressBar": true,
"positionClass": "toast-top-right",
"timeOut": "5000"
        };
function toggleTheme() {
document.body.classList.toggle('dark-theme');
localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
        }
if (localStorage.getItem('theme') === 'dark') {
document.body.classList.add('dark-theme');
        }
</script>
    {% block extra_js %}{% endblock %}
</body>
</html>